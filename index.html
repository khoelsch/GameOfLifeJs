<html>
  <head>
    <title>JavaScript implementation of Convay's Game Of Life</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body>
  
    <script type="text/javascript">
      /**
       * Assumptions:
       *
       *  - the field is 2D
       *  - the field is finite
       *  - the field is a square field with 'edgeSize' fields
       *  - the first is the TOP LEFT corner (imagine the field as rows stacked upon each other)
       */
      function GameOfLifeField(edgeSize) {
        var field = new Array();
        for (var i=0; i<edgeSize; ++i) {
          field.push(new Array(edgeSize));
        }

        /**
         * Method that returns the state of a cell:
         *  -> true = living cell
         *  -> false = dead cell
         */
        this.cellAt = function (row, col) {
          return !!field[row][col];
        }

        this.performLifecycle = function() {
        }

        this.setCellState = function(row,col, newState) {
        }
      };


      // Helper function to display test results
      function assert(expr, assumption) {
        var li = document.createElement('li');
        li.className = !!expr ? 'success' : 'failure';
        li.appendChild(document.createTextNode(assumption));
        document.getElementById('testResults').appendChild(li);
      };

      // Test #01
      function assertNewFieldContainsOnlyDeadCells() {
        var edgeSize = 3;
        var golField = new GameOfLifeField(edgeSize);
        var allCellsAreDead = true;

        for (var row=0; row<edgeSize; ++row) {
          for (var col=0; col<edgeSize; ++col) {
            if (golField.cellAt(row, col)) {
              allCellsAreDead = false;
            }
          }
        }

        assert(allCellsAreDead, 'All cells are dead in a newly created Game Of Life.')
      };


      // Test #02 (starting to test for 1. Rule: 'Cell dies, if less that TWO living neighbours')
      function assertRuleOneHoldsAllCellsDie() {
        var edgeSize = 3;
        var golField = new GameOfLifeField(edgeSize);

        // only one living cell in each corner
        golField.setCellState(0, 0, true);
        golField.setCellState(0, 2, true);
        golField.setCellState(2, 0, true);
        golField.setCellState(2, 2, true);

        var allCellsAreDead = !golField.cellAt(0, 0)
          && !golField.cellAt(0, 2)
          && !golField.cellAt(2, 0)
          && !golField.cellAt(2, 2);

        assert(allCellsAreDead, 'All cells died!')
      }

      // Execute our code, when document is loaded
      window.onload = function() {
        assertNewFieldContainsOnlyDeadCells();
        assertRuleOneHoldsAllCellsDie();
      };
    </script>
  
    <ul id="testResults"></ul>
  </body>
</html>